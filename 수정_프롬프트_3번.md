# 이미지 자르기(크롭) 기능 추가해줘

## 추가할 기능

사진 편집 도구에 이미지를 원하는 영역만 자를 수 있는 크롭 기능을 추가해줘.

---

## 하단 도구 버튼 (수정)

```
┌───────────────────────────────────────────────────────────┐
│                                                           │
│            [이미지 미리보기 영역]                           │
│                                                           │
├───────────────────────────────────────────────────────────┤
│                                                           │
│   🖼️        ✂️        ➕          🎨        ✏️           │
│  이미지    자르기   이미지추가    배경색     텍스트          │
│                                                           │
└───────────────────────────────────────────────────────────┘
```

---

## 자르기(크롭) 도구

### UI 구조

```
┌─────────────────────────────────────────────────────────┐
│  ✂️ 자르기                                               │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  비율 선택:                                              │
│  ┌─────┐ ┌─────┐ ┌─────┐ ┌─────┐ ┌─────┐              │
│  │ 자유 │ │ 1:1 │ │ 3:4 │ │ 4:3 │ │16:9 │              │
│  └─────┘ └─────┘ └─────┘ └─────┘ └─────┘              │
│                                                         │
│  ┌───────────────────────────────────────┐             │
│  │                                       │             │
│  │    ┌─────────────────────┐            │             │
│  │    │ ┏━━━━━━━━━━━━━━━┓   │            │             │
│  │    │ ┃   크롭 영역    ┃   │  ← 드래그로 크기 조절    │
│  │    │ ┃               ┃   │            │             │
│  │    │ ┗━━━━━━━━━━━━━━━┛   │            │             │
│  │    └─────────────────────┘            │             │
│  │         (어두운 영역 = 잘릴 부분)       │             │
│  └───────────────────────────────────────┘             │
│                                                         │
│  [초기화]                        [취소]  [자르기 적용]   │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

### 비율 프리셋

| 버튼 | 비율 | 용도 |
|------|------|------|
| 자유 | 자유 비율 | 원하는 대로 자르기 |
| 1:1 | 정사각형 | 대표이미지, 썸네일 |
| 3:4 | 세로형 | 코디컷, 착장샷 |
| 4:3 | 가로형 | 가로 이미지 |
| 16:9 | 와이드 | 배너, 썸네일 |

### 조작 방법

1. **비율 선택**
   - 프리셋 버튼 클릭 또는 "자유" 선택
   - 선택한 비율로 크롭 영역 고정

2. **크롭 영역 조절**
   - 모서리/변 드래그 → 크기 조절
   - 중앙 드래그 → 위치 이동
   - 비율 고정 시 비율 유지하면서 크기만 변경

3. **미리보기**
   - 크롭 영역 외부는 어둡게 표시 (오버레이)
   - 크롭 영역 내부만 밝게 표시
   - 실시간으로 결과 미리보기

4. **적용**
   - "자르기 적용" 클릭 → 이미지 크롭 완료
   - 크롭된 이미지가 레이어에 반영됨

---

## 기존 이미지 도구와의 관계

| 도구 | 기능 | 설명 |
|------|------|------|
| 🖼️ 이미지 | 확대/축소, 위치 조정 | 레이어 내에서 이미지 조작 |
| ✂️ 자르기 | 이미지 자체를 자름 | 이미지 원본 크롭 |

- **이미지 도구**: 캔버스 안에서 이미지 위치/크기 조절
- **자르기 도구**: 이미지 자체의 일부 영역만 남기고 삭제

---

## 자르기 도구 상세 기능

### 1. 크롭 영역 핸들

```
    ○─────────────────○
    │                 │
    ○                 ○  ← 모서리: 대각선 크기 조절
    │                 │     변: 한 방향 크기 조절
    ○─────────────────○
```

- 8개 핸들 (4 모서리 + 4 변)
- 모서리 드래그: 대각선 방향 크기 조절
- 변 드래그: 한 방향만 크기 조절
- 비율 고정 시 모서리만 활성화

### 2. 크롭 가이드라인 (선택)

```
    ┌───┬───┬───┐
    │   │   │   │
    ├───┼───┼───┤  ← 3분할 가이드 (Rule of Thirds)
    │   │   │   │
    ├───┼───┼───┤
    │   │   │   │
    └───┴───┴───┘
```

- 3분할 가이드라인 표시 (ON/OFF 토글)
- 구도 잡기 도움

### 3. 크롭 정보 표시

```
크기: 800 x 600 px
비율: 4:3
```

- 현재 크롭 영역 크기 실시간 표시
- 현재 비율 표시

---

## 동작 흐름

```
1. 자르기 도구 선택
   ↓
2. 비율 선택 (자유 / 1:1 / 3:4 / 4:3 / 16:9)
   ↓
3. 크롭 영역 드래그로 조절
   ↓
4. "자르기 적용" 클릭
   ↓
5. 이미지 크롭 완료 → 레이어에 반영
```

---

## 기술 참고

### Canvas 크롭 처리
```javascript
function cropImage(image, cropArea) {
  const canvas = document.createElement('canvas');
  const ctx = canvas.getContext('2d');
  
  canvas.width = cropArea.width;
  canvas.height = cropArea.height;
  
  ctx.drawImage(
    image,
    cropArea.x, cropArea.y, cropArea.width, cropArea.height,
    0, 0, cropArea.width, cropArea.height
  );
  
  return canvas.toDataURL('image/jpeg');
}
```

### 비율 고정 크기 조절
```javascript
function resizeWithAspectRatio(width, height, ratio) {
  // ratio = width / height (예: 4:3 = 1.333)
  const newHeight = width / ratio;
  return { width, height: newHeight };
}
```

### 라이브러리 추천
- react-image-crop
- react-easy-crop
- cropperjs